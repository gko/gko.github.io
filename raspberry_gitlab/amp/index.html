<!DOCTYPE html><html lang="en" amp="true"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="google-site-verification" content="UnUpmjHYK-ovLPrET8_xJ_XgJnmCyQcrYxkWkN06Z0k"/><meta name="generator" content="Gatsby 2.0.85"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#333333"/><title data-react-helmet="true">Konstantin Gorodinskiy</title><link data-react-helmet="true" rel="canonical" href="https://konstantin.io/raspberry_gitlab/"/><meta data-react-helmet="true" name="description" content="With an introduction of  USB boot  option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time…"/><meta data-react-helmet="true" property="og:title" content="Using raspberry as gitlab runner(with docker)"/><meta data-react-helmet="true" property="og:description" content="With an introduction of  USB boot  option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time…"/><meta data-react-helmet="true" property="og:url" content="https://konstantin.io/raspberry_gitlab/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="twitter:creator" content="Konstantin"/><meta data-react-helmet="true" name="twitter:title" content="Using raspberry as gitlab runner(with docker)"/><meta data-react-helmet="true" name="twitter:description" content="With an introduction of  USB boot  option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time…"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:image" content="https://konstantin.io/using-raspberry-as-gitlab-runner-with-docker.png"/><noscript data-react-helmet="true"><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><script data-react-helmet="true" async="" src="https://cdn.ampproject.org/v0.js"></script><script data-react-helmet="true" type="application/ld+json">{
                      "@context": "http://schema.org",
                      "@type": "NewsArticle",
                      "headline": "Using raspberry as gitlab runner(with docker)",
                      "datePublished": "2019-01-26T00:00:00.000Z",
                      "dateModified": "2019-01-26T00:00:00.000Z",
                      "author": "Konstantin",
                      "publisher": {
                        type: "Person",
                        name: "Konstantin"
                      },
                      "mainEntityOfPage": "https://konstantin.io/using-raspberry-as-gitlab-runner-with-docker",
                      "image": [
                        "https://konstantin.io/using-raspberry-as-gitlab-runner-with-docker.png"
                      ]
                    }</script><style data-react-helmet="true" amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/0-a632b95a34dcbb25d4c8.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-amp-js-0cf67bacc2f5d4d5c205.js"/><link as="script" rel="preload" href="/1-6f89559752afe52e3eb9.js"/><link as="script" rel="preload" href="/app-0d00eb9bd12d2099c818.js"/><link as="script" rel="preload" href="/webpack-runtime-5706810cf4ced804adae.js"/><link as="fetch" rel="preload" href="/static/d/709/path---raspberry-gitlab-amp-5-f-0-080-i0QBEQ95fskdOkjsdidzJUCmC8c.json" crossOrigin="use-credentials"/> </head> <body>  <div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><h3 class="backLink"><a style="box-shadow:none;text-decoration:none;color:inherit;font-weight:300" href="/"><span class="arrow">←</span> <!-- -->Konstantin Gorodinskiy</a></h3><h1>Using raspberry as gitlab runner(with docker)</h1><ul class="tags" style="padding-left:0"><li class="tag"><a href="/tags/gitlab/">gitlab</a></li><li class="tag"><a href="/tags/raspberry/">raspberry</a></li><li class="tag"><a href="/tags/docker/">docker</a></li></ul><p>January 26, 2019</p><div><p>With an introduction of <a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md">USB boot</a> option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time and reconfigure the whole system.</p>
<p>And with SSD installed raspberry becomes an interesting option to use as an external <a href="https://docs.gitlab.com/runner/#install-gitlab-runner"><code class="language-text">gitlab runner</code></a>.</p>
<p>Now, as an executor you will probably choose <code class="language-text">docker</code> since it allows you to run any software that you want in without having to install it on your Raspberry.</p>
<h2>But there is a catch</h2>
<p>Since Raspberry doesn’t have x64 CPU but rather ARMvX you will find that some of your gitlab jobs will fail with a following log:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">standard_init_linux.go:190: exec user process caused &quot;exec format error&quot;
standard_init_linux.go:190: exec user process caused &quot;exec format error&quot;
ERROR: Job failed: exit code 1</code></pre></div>
<p>That means that you have to go onto your raspberry and build your image locally like so:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">docker build -t node .</code></pre></div>
<p>provided that you have a <code class="language-text">Dockerfile</code> prepared:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">FROM node:8</code></pre></div>
<p>And then you need to tell your docker executor to use local image instead of one from Dockerhub:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">[[runners]]
  name = &quot;raspberrypi&quot;
  ...
  executor = &quot;docker&quot;
  [runners.docker]
    ...
    pull_policy = &quot;if-not-present&quot;</code></pre></div></div><hr/><footer>© <!-- -->2019<!-- -->, <a href="mailto:hi@konstantin.io?subject=hello">Konstantin</a></footer></div></div></div>  </body> </html>