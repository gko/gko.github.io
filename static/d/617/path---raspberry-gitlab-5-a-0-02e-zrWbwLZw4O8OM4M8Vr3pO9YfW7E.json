{"data":{"site":{"siteMetadata":{"title":"Konstantin","author":"Konstantin","siteUrl":"https://konstantin.io","repository":"https://github.com/gko/gko.github.io"}},"markdownRemark":{"id":"88508abd-cae6-5253-bcb7-949b0080cd30","excerpt":"With an introduction of  USB boot  option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time…","html":"<p>With an introduction of <a href=\"https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md\">USB boot</a> option to Raspberry you can use it with an external SSD drive, so you don’t need to switch broken SD cards from time to time and reconfigure the whole system.</p>\n<p>And with SSD installed raspberry becomes an interesting option to use as an external <a href=\"https://docs.gitlab.com/runner/#install-gitlab-runner\"><code class=\"language-text\">gitlab runner</code></a>.</p>\n<p>Now, as an executor you will probably choose <code class=\"language-text\">docker</code> since it allows you to run any software that you want in without having to install it on your Raspberry.</p>\n<h2 id=\"but-there-is-a-catch\"><a href=\"#but-there-is-a-catch\" aria-label=\"but there is a catch permalink\" class=\"header-anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>But there is a catch</h2>\n<p>Since Raspberry doesn’t have x64 CPU but rather ARMvX you will find that some of your gitlab jobs will fail with a following log:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">standard_init_linux.go:190: exec user process caused &quot;exec format error&quot;\nstandard_init_linux.go:190: exec user process caused &quot;exec format error&quot;\nERROR: Job failed: exit code 1</code></pre></div>\n<p>That means that you have to go onto your raspberry and build your image locally like so:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker build -t node .</code></pre></div>\n<p>provided that you have a <code class=\"language-text\">Dockerfile</code> prepared:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM node:8</code></pre></div>\n<p>And then you need to tell your docker executor to use local image instead of one from Dockerhub:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[runners]]\n  name = &quot;raspberrypi&quot;\n  ...\n  executor = &quot;docker&quot;\n  [runners.docker]\n    ...\n    pull_policy = &quot;if-not-present&quot;</code></pre></div>","frontmatter":{"title":"Using raspberry as gitlab runner(with docker)","tags":["gitlab","raspberry","docker"],"date":"2019-01-26T00:00:00.000Z","cover_image":null},"fields":{"slug":"/raspberry-gitlab/"}}},"pageContext":{"slug":"/raspberry-gitlab/","previous":{"fields":{"slug":"/gatsby-github/"},"frontmatter":{"title":"Running «Gatsby.js» blog with github pages","tags":["gatsby","git","github","blog"],"published":true,"slug":null,"cover_image":null},"fileAbsolutePath":"/Users/gk/projects/gko.github.io/src/posts/gatsby-github.md"},"next":{"fields":{"slug":"/font-display/"},"frontmatter":{"title":"How to avoid blank font","tags":["css","fonts","font-display"],"published":true,"slug":null,"cover_image":null},"fileAbsolutePath":"/Users/gk/projects/gko.github.io/src/posts/font-display.md"},"filename":"raspberry-gitlab.md"}}